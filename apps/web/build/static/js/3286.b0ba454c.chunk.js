"use strict";(self.webpackChunk_uniswap_interface=self.webpackChunk_uniswap_interface||[]).push([[3286],{83286:(e,t,n)=>{n.d(t,{uT:()=>zt,Lg:()=>Ut,Ay:()=>Gt});var s=n(95682),r=n(29477),a=n(46529),o=n(69618),i=n(61093),d=n(16444),l=n(31997),u=(n(91103),n(55043)),c=n(23974),p=n(23143),m=n(70819),f="_1kuawcb rgw6ezbf rgw6ezd9 rgw6ez8bh rgw6ez45r rgw6ez45l",g="_1kuawc1 rgw6ez2dr rgw6ez2j9 rgw6ez2of rgw6ez27x rgw6ez4b9 rgw6ez3tf rgw6ez7zd rgw6ez1dr rgw6ez80x",x="rgw6ez149 rgw6ez1b9 rgw6ez49l rgw6ez80p",h="rgw6ezd3 rgw6ezb9 rgw6eze3 rgw6ez8bh rgw6ez45l rgw6ez45r rgw6ez4bf",y="_1kuawc7",v="rgw6ez3xr",I=n(55199);const A=I.keyframes`
  0% {
    stroke-dashoffset: 1000;
  }
  100% {
    stroke-dashoffset: 0;
  }
`,T=d.Ay.circle`
  stroke-dasharray: 1000;
  stroke-dashoffset: 0;
  -webkit-animation: ${A} linear;
  animation: ${A} linear;
  animation-duration: 160s;
  stroke: ${({theme:e})=>e.accent1};
`,k=()=>(0,s.jsx)(a.a,{display:"flex",position:"absolute",children:(0,s.jsx)("svg",{height:"18px",width:"18px",children:(0,s.jsx)(T,{strokeWidth:"1.5",strokeLinecap:"round",style:{transform:"rotate(90deg)",transformOrigin:"50% 50%"},fill:"transparent",r:"8px",cx:"9px",cy:"9px"})})});var w=n(68097),b=n(94412),N=n(87877),E=n(65528),P=n(35249),C=n(33962),j=n(42150),S=n(91071);const _=(0,d.Ay)(m.oy)`
  border-radius: 12px;
  font-size: 14px;
  line-height: 16px;
  margin-left: 16px;
  padding: 12px 14px;
`,O=(0,d.Ay)(m.oy)`
  border-radius: 12px;
  flex: 1 1 auto;
  font-size: 14px;
  padding: 8px;
  width: 50%;
`,R=d.Ay.div`
  position: absolute;
  display: block;
  right: -11px;
  top: -11px;
  z-index: 1;
  transition: 250ms;
  width: 45px;
  height: 45px;
  display: flex;
  align-items: center;
  justify-content: center;
`,L=({onClick:e})=>(0,s.jsx)(R,{onClick:e,children:(0,s.jsx)(b.bf,{})}),D=()=>(0,s.jsx)(a.a,{position:"relative",background:"loadingBackground",className:x,children:(0,s.jsxs)(a.a,{position:"absolute",textAlign:"center",left:"1/2",top:"1/2",style:{transform:"translate3d(-50%, -50%, 0)"},color:"gray500",fontSize:"12",fontWeight:"book",children:["Image",(0,s.jsx)("br",{}),"not",(0,s.jsx)("br",{}),"available"]})}),H=({asset:e,usdPrice:t,removeAsset:n,showRemove:r,grayscale:o,isMobile:i})=>{const{formatEther:d,formatNumberOrString:u}=(0,S.kc)(),[I,A]=(0,C.useState)(!1),[T,k]=(0,C.useState)(!e.smallImageUrl),[N,O]=(0,C.useState)(!1),R=(0,C.useCallback)((()=>O(!0)),[]),H=(0,C.useCallback)((()=>O(!1)),[]),z=Boolean(r&&N&&!i),U=e.updatedPriceInfo?e.updatedPriceInfo.ETHPrice:e.priceInfo.ETHPrice,B=d({input:U,type:S.wl.NFTToken}),F=u({input:t?parseFloat((0,c.formatEther)(U))*t:t,type:S.wl.FiatNFTToken}),$=(0,C.useCallback)((t=>{t.preventDefault(),t.stopPropagation(),n([e])}),[e,n]);return(0,s.jsx)(j.Link,{to:(0,P.yU)(e),style:{textDecoration:"none"},children:(0,s.jsxs)(l.fI,{className:g,onMouseEnter:R,onMouseLeave:H,children:[(0,s.jsxs)(a.a,{position:"relative",display:"flex",children:[r&&i&&(0,s.jsx)(L,{onClick:$}),!T&&(0,s.jsx)(a.a,{as:"img",src:e.smallImageUrl,alt:e.name,className:(0,p.default)(x,o&&!N&&y),onLoad:()=>{A(!0)},onError:()=>{k(!0)},visibility:I?"visible":"hidden"}),!I&&(0,s.jsx)(a.a,{position:"absolute",className:`${x} ${E.C}`}),T&&(0,s.jsx)(D,{})]}),(0,s.jsxs)(l.VP,{overflow:"hidden",width:"full",color:o?"neutral2":"neutral1",children:[(0,s.jsxs)(l.fI,{overflow:"hidden",width:"full",whiteSpace:"nowrap",children:[(0,s.jsx)(a.a,{className:f,children:e.name??`#${e.tokenId}`}),e.susFlag&&(0,s.jsx)(w.kY,{})]}),(0,s.jsxs)(l.fI,{overflow:"hidden",whiteSpace:"nowrap",gap:"2",children:[(0,s.jsx)(a.a,{className:h,children:e.collectionName}),e.collectionIsVerified&&(0,s.jsx)(b.M3,{className:v})]})]}),z&&(0,s.jsx)(_,{onClick:$,emphasis:m.jG.medium,size:m.Mp.medium,children:"Remove"}),(!z||i)&&(0,s.jsxs)(l.VP,{flexShrink:"0",alignItems:"flex-end",children:[(0,s.jsxs)(a.a,{className:"_1kuawc9 rgw6ez3sr rgw6ezbf rgw6ezd9 rgw6ez3xr",children:[B,"\xa0ETH"]}),(0,s.jsx)(a.a,{className:h,children:F})]})]})})},z=({asset:e,usdPrice:t,markAssetAsReviewed:n,top:r,isMobile:o})=>{var i;const{formatEther:d}=(0,S.kc)(),c=u.gH.from(null===(i=e.updatedPriceInfo)||void 0===i?void 0:i.ETHPrice).gt(u.gH.from(e.priceInfo.ETHPrice)),p=(0,C.useCallback)((t=>{t.preventDefault(),t.stopPropagation();n(e,!1)}),[e,n]),f=(0,C.useCallback)((t=>{t.preventDefault(),t.stopPropagation();n(e,!0)}),[e,n]);return(0,s.jsxs)(l.VP,{className:"rgw6ez2p3 rgw6ez28l rgw6ezlf rgw6ezqx rgw6ez4ux rgw6ez3t3 rgw6ez4b9 rgw6ez7zp rgw6ez895 rgw6ez59f rgw6ez5yr rgw6ez1dr rgw6ez7zd",borderTopColor:r?"surface3":"transparent",children:[(0,s.jsxs)(l.fI,{className:"rgw6ezd3 rgw6ezb9 rgw6eze3 rgw6ez4dr rgw6ez3sr",children:[c?(0,s.jsx)(b.DU,{}):(0,s.jsx)(b.M6,{}),(0,s.jsx)(a.a,{children:`Price ${c?"increased":"decreased"} from ${d({input:e.priceInfo.ETHPrice,type:S.wl.NFTToken})} ETH`})]}),(0,s.jsx)(a.a,{style:{marginLeft:"-8px",marginRight:"-8px"},children:(0,s.jsx)(H,{asset:e,usdPrice:t,removeAsset:()=>{},isMobile:o})}),(0,s.jsxs)(l.fI,{gap:"8",justifyContent:"space-between",children:[(0,s.jsx)(O,{onClick:p,emphasis:m.jG.medium,size:m.Mp.small,children:"Remove"}),(0,s.jsx)(O,{onClick:f,emphasis:m.jG.high,size:m.Mp.small,children:"Keep"})]})]})},U=({assets:e})=>(0,s.jsx)(l.VP,{display:"grid",style:{gridTemplateColumns:`repeat(${e.length}, 20px)`,width:32+20*(e.length-1)+"px"},children:e.map(((e,t)=>(0,s.jsx)(a.a,{as:"img",src:e.smallImageUrl,width:"32",height:"32",borderStyle:"solid",borderWidth:"1px",borderColor:"surface1",borderRadius:"4",style:{zIndex:t},className:y},`${e.address}-${e.tokenId}`)))}),B=({assets:e,usdPrice:t,clearUnavailableAssets:n,didOpenUnavailableAssets:r,setDidOpenUnavailableAssets:a,isMobile:o})=>{const[i,d]=(0,C.useReducer)((e=>!e),!1),[u,c]=(0,C.useState)(8);if((0,C.useEffect)((()=>{if(!u)return void(r||(n(),a(!1)));const e=setInterval((()=>{c(u-1)}),1e3);return()=>clearInterval(e)}),[u,n,r,a]),!e||0===e.length)return null;const p=e.length>1,m=i||!p;return(0,s.jsx)(l.VP,{className:"rgw6ez2p3 rgw6ez28l rgw6ezlf rgw6ezqx rgw6ez4ux rgw6ez3tf rgw6ez4b9 rgw6ez7zp rgw6ez895 rgw6ez59f rgw6ez6df rgw6ez5yr rgw6ez1dr",children:(0,s.jsxs)(l.VP,{children:[(0,s.jsxs)(l.fI,{justifyContent:"space-between",marginBottom:m?"12":"0",cursor:p?"pointer":"default",onClick:()=>{p&&(!r&&a(!0),d())},children:[(0,s.jsxs)(l.fI,{gap:"12",color:"neutral2",className:N.ct,children:[!m&&(0,s.jsx)(U,{assets:e.slice(0,5)}),"No longer available"]}),p&&(0,s.jsx)(l.fI,{color:"neutral2",children:i?(0,s.jsx)(b.um,{}):(0,s.jsx)(b.ld,{})}),!r&&(0,s.jsxs)(l.fI,{position:"relative",width:"20",height:"20",color:"neutral1",justifyContent:"center",cursor:"pointer",onClick:n,children:[(0,s.jsx)(k,{}),(0,s.jsx)(b.tC,{})]})]}),(0,s.jsx)(l.VP,{gap:"8",style:{marginLeft:"-8px",marginRight:"-8px"},children:m&&e.map((e=>(0,s.jsx)(H,{asset:e,usdPrice:t,removeAsset:()=>{},grayscale:!0,isMobile:o},e.id)))})]})})};var F=n(76191),$=n(43140),M=n(74888),G=n(19321),V=n(89623),K=n(53195),W=n(53412);const q=()=>{const e=(0,F.s)((e=>e.bagStatus)),t=(0,F.s)((e=>e.setBagStatus)),n=(0,F.s)((e=>e.markAssetAsReviewed)),a=(0,F.s)((e=>e.didOpenUnavailableAssets)),i=(0,F.s)((e=>e.setDidOpenUnavailableAssets)),d=(0,F.s)((e=>e.itemsInBag)),u=(0,F.s)((e=>e.setItemsInBag)),c=(0,F.s)((e=>e.removeAssetsFromBag)),p=(0,o.a)(),m=(0,C.useMemo)((()=>(0,G.cv)(d)),[d]),f=(0,$.M)(),{unchangedAssets:g,priceChangedAssets:x,unavailableAssets:h,availableItems:y}=(0,C.useMemo)((()=>({unchangedAssets:m.filter((e=>e.status===M.o9.ADDED_TO_BAG||e.status===M.o9.REVIEWED)).map((e=>e.asset)),priceChangedAssets:m.filter((e=>e.status===M.o9.REVIEWING_PRICE_CHANGE)).map((e=>e.asset)),unavailableAssets:m.filter((e=>e.status===M.o9.UNAVAILABLE)).map((e=>e.asset)),availableItems:m.filter((e=>e.status!==M.o9.UNAVAILABLE))})),[m]);return(0,C.useEffect)((()=>{const n=x.length>0,s=m.length>0;n&&(0,W.sendAnalyticsEvent)(r.c6.NFT_BUY_BAG_CHANGED,{usd_value:f,bag_quantity:m.length,...(0,V.N)(x)}),e!==M.rm.IN_REVIEW||n||t(s?M.rm.CONFIRM_REVIEW:M.rm.ADDING_TO_BAG),e!==M.rm.CONFIRM_REVIEW||s||t(M.rm.ADDING_TO_BAG)}),[e,m,x,t,f]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(l.VP,{display:x.length>0||h.length>0?"flex":"none",children:[h.length>0&&(0,s.jsx)(K.default,{logImpression:!0,eventOnTrigger:r.c6.NFT_BUY_BAG_CHANGED,properties:{usd_value:f,bag_quantity:m.length,...(0,V.N)(h)},children:(0,s.jsx)(B,{assets:h,usdPrice:f,clearUnavailableAssets:()=>u(y),didOpenUnavailableAssets:a,setDidOpenUnavailableAssets:i,isMobile:p})}),x.map(((e,t)=>(0,s.jsx)(z,{asset:e,usdPrice:f,markAssetAsReviewed:n,top:0===t&&0===h.length,isMobile:p},e.id)))]}),(0,s.jsx)(l.VP,{children:g.slice(0).reverse().map((e=>(0,s.jsx)(H,{asset:e,usdPrice:f,removeAsset:c,showRemove:!0,isMobile:p},e.id)))})]})};var Y=n(97404),X=n(15260),Q=n(87367),Z=n(8509),J=n(27249),ee=n(32034),te=n(38108),ne=n(45353),se=n(63247),re=n(85160),ae=n(28808),oe=n(85141),ie=n(26179);var de=n(65475),le=n(78135),ue=n(59737),ce=n(21553),pe=n(48565),me=n.n(pe),fe=n(97161),ge=n(5525),xe=n(9656),he=n(35480),ye=(e=>(e[e.WALLET_NOT_CONNECTED=0]="WALLET_NOT_CONNECTED",e[e.NOT_SUPPORTED_CHAIN=1]="NOT_SUPPORTED_CHAIN",e[e.INSUFFICIENT_BALANCE=2]="INSUFFICIENT_BALANCE",e[e.ERROR=3]="ERROR",e[e.IN_WALLET_CONFIRMATION=4]="IN_WALLET_CONFIRMATION",e[e.PROCESSING_TRANSACTION=5]="PROCESSING_TRANSACTION",e[e.FETCHING_TOKEN_ROUTE=6]="FETCHING_TOKEN_ROUTE",e[e.INVALID_TOKEN_ROUTE=7]="INVALID_TOKEN_ROUTE",e[e.NO_TOKEN_ROUTE_FOUND=8]="NO_TOKEN_ROUTE_FOUND",e[e.LOADING_ALLOWANCE=9]="LOADING_ALLOWANCE",e[e.IN_WALLET_ALLOWANCE_APPROVAL=10]="IN_WALLET_ALLOWANCE_APPROVAL",e[e.PROCESSING_APPROVAL=11]="PROCESSING_APPROVAL",e[e.REQUIRE_APPROVAL=12]="REQUIRE_APPROVAL",e[e.CONFIRM_UPDATED_PRICE=13]="CONFIRM_UPDATED_PRICE",e[e.PRICE_IMPACT_HIGH=14]="PRICE_IMPACT_HIGH",e[e.PAY=15]="PAY",e))(ye||{});function ve(e,t,n,r,a){const o={handleClick:()=>{},buttonText:(0,s.jsx)(he.Trans,{i18nKey:"common.card.error.description"}),disabled:!0,warningText:void 0,warningTextColor:t.deprecated_accentWarning,helperText:void 0,helperTextColor:t.neutral2,buttonColor:t.accent1,buttonTextColor:t.deprecated_accentTextLightPrimary};return{0:{...o,handleClick:n??(()=>{}),disabled:!1,buttonText:(0,s.jsx)(xe.$,{})},1:{...o,handleClick:n??(()=>{}),buttonText:(0,s.jsx)(he.Trans,{i18nKey:"common.switchNetworks"}),disabled:!1,warningText:(0,s.jsx)(he.Trans,{i18nKey:"common.wrongNetwork"})},2:{...o,buttonText:(0,s.jsx)(he.Trans,{i18nKey:"common.pay.button"}),warningText:(0,s.jsx)(he.Trans,{i18nKey:"common.insufficient.funds"})},3:{...o,warningText:(0,s.jsx)(he.Trans,{i18nKey:"common.error.wrong.tryAgain"})},4:{...o,buttonText:(0,s.jsx)(he.Trans,{i18nKey:"common.proceedInWallet.short"})},5:{...o,buttonText:(0,s.jsx)(he.Trans,{i18nKey:"common.transactionPending"})},6:{...o,buttonText:(0,s.jsx)(he.Trans,{i18nKey:"common.fetchingRoute"})},7:{...o,buttonText:(0,s.jsx)(he.Trans,{i18nKey:"common.pay.button"})},8:{...o,buttonText:(0,s.jsx)(he.Trans,{i18nKey:"common.insufficientLiquidity"}),buttonColor:t.surface3,buttonTextColor:t.neutral1,helperText:(0,s.jsx)(he.Trans,{i18nKey:"transaction.insufficientLiquidity"})},9:{...o,buttonText:(0,s.jsx)(he.Trans,{i18nKey:"common.loadingAllowance"})},10:{...o,buttonText:(0,s.jsx)(he.Trans,{i18nKey:"swap.approveInWallet"})},11:{...o,buttonText:(0,s.jsx)(he.Trans,{i18nKey:"swap.approvalPending"})},12:{...o,disabled:!1,handleClick:n??(()=>{}),helperText:(0,s.jsx)(he.Trans,{i18nKey:"swap.approvalNeeded"}),buttonText:(0,s.jsx)(he.Trans,{i18nKey:"common.approve"})},13:{...o,handleClick:n??(()=>{}),disabled:!1,warningTextColor:t.accent1,warningText:(0,s.jsx)(he.Trans,{i18nKey:"common.priceUpdated"}),buttonText:(0,s.jsx)(he.Trans,{i18nKey:"common.pay.button"})},14:{...o,handleClick:n??(()=>{}),disabled:!1,buttonColor:a?a.priceImpactSeverity.color:o.buttonColor,helperText:(0,s.jsx)(he.Trans,{i18nKey:"common.priceImpact"}),helperTextColor:a?a.priceImpactSeverity.color:o.helperTextColor,buttonText:(0,s.jsx)(he.Trans,{i18nKey:"swap.payAnyway"})},15:{...o,handleClick:n??(()=>{}),disabled:!1,buttonText:(0,s.jsx)(he.Trans,{i18nKey:"common.pay.button"}),helperText:r?(0,s.jsx)(he.Trans,{i18nKey:"nft.refundsInEth"}):void 0}}[e]}var Ie=n(46973),Ae=n(88297),Te=n(26954),ke=n(23328),we=n(60302);var be=n(29681),Ne=n(26908),Ee=n(45550);function Pe(e,t,n,s,r,a,o){try{var i=e[a](o),d=i.value}catch(l){return void n(l)}i.done?t(d):Promise.resolve(d).then(s,r)}function Ce(){const e=(0,be.N)(),t=(0,Ne.s)((e=>e.sendTransaction)),n=(0,Ee.t)((e=>e.setTransactionResponse)),{setLocked:s,setBagExpanded:r,reset:a}=(0,F.s)((({setLocked:e,setBagExpanded:t,reset:n})=>({setLocked:e,setBagExpanded:t,reset:n})));return(0,C.useCallback)(function(){var o,i=(o=function*(o,i,d=!1){if(!e)return;const l=yield t(e,i,o,d);l&&(s(!1),n(l),r({bagExpanded:!1}),a())},function(){var e=this,t=arguments;return new Promise((function(n,s){var r=o.apply(e,t);function a(e){Pe(r,n,s,a,i,"next",e)}function i(e){Pe(r,n,s,a,i,"throw",e)}a(void 0)}))});return function(e,t){return i.apply(this,arguments)}}(),[e,a,t,r,s,n])}var je=n(98267),Se=n(74617);const _e=(0,n(96858).h)()((0,je.lt)((e=>({inputCurrency:void 0,tokenTradeInput:void 0,setInputCurrency:t=>e((()=>({inputCurrency:t}))),clearInputCurrency:()=>e((()=>({inputCurrency:void 0}))),setTokenTradeInput:t=>e((()=>({tokenTradeInput:t})))})),{name:"useTokenInput"}),Se.x),Oe=e=>{const t=e.filter((e=>e.status!==M.o9.UNAVAILABLE)).map((e=>e.asset));return Re(t)},Re=e=>e.flatMap((e=>{const{id:t,address:n,marketplace:s,priceInfo:r,tokenId:a,tokenType:o}=e;if(!t||!s)return[];const i={amount:r.ETHPrice,token:{address:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",chainId:1,decimals:18,isNative:!0}};return[{amount:1,contractAddress:n,id:t,marketplace:s.toUpperCase(),quotePrice:i,tokenId:a,tokenType:o}]}));var Le=n(52689),De=n(16381);function He(e,t,n){const{hasPriceAdjustment:s,updatedAssets:r}=(0,Le.Q)(e,t),a=s&&n,{unchanged:o,priceChanged:i,unavailable:d}=(0,De.$)(r),l=r.length>0,u=i.length>0,c=d.length>0,p=u||c,m=function(e,t,n){return[...e.map((e=>({asset:e,status:M.o9.UNAVAILABLE}))),...t.map((e=>({asset:e,status:M.o9.REVIEWING_PRICE_CHANGE}))),...n.map((e=>({asset:e,status:M.o9.REVIEWED})))]}(d,i,o),f=function(e,t,n,s){return e?t?n?M.rm.IN_REVIEW:M.rm.CONFIRM_REVIEW:s?M.rm.CONFIRM_QUOTE:M.rm.CONFIRMING_IN_WALLET:M.rm.ADDING_TO_BAG}(l,p,u,a);return{newBagItems:m,nextBagStatus:f}}function ze(e){return{action:M.sH.Buy,marketplace:e.marketplace.toLowerCase(),amountIn:e.price.value,assetIn:{ETHPrice:e.price.value,baseAsset:e.price.currency,basePrice:e.price.value,baseDecimals:"18"},amountOut:e.amount.toString(),assetOut:{id:e.id,decimals:18,address:e.contractAddress,priceInfo:{ETHPrice:e.price.value,baseAsset:e.price.currency,basePrice:e.price.value,baseDecimals:"18"},tokenType:e.tokenType,tokenId:e.tokenId,amount:e.amount.toString(),marketplace:e.marketplace.toLowerCase(),orderSource:"api"}}}function Ue(e,t){const n=e.route?e.route.map(ze):[];return{route:n,routeResponse:{route:n,valueToSend:t?void 0:e.sendAmount.value,data:e.calldata,to:e.toAddress}}}function Be(e,t,n,s,r,a,o){try{var i=e[a](o),d=i.value}catch(l){return void n(l)}i.done?t(d):Promise.resolve(d).then(s,r)}function Fe(e){return function(){var t=this,n=arguments;return new Promise((function(s,r){var a=e.apply(t,n);function o(e){Be(a,s,r,o,i,"next",e)}function i(e){Be(a,s,r,o,i,"throw",e)}o(void 0)}))}}function $e(){const e=(0,le.F)(),{itemsInBag:t,setBagStatus:n,didOpenUnavailableAssets:s,setDidOpenUnavailableAssets:r,isLocked:a,setLocked:o,setItemsInBag:i}=(0,F.s)((({itemsInBag:e,setBagStatus:t,didOpenUnavailableAssets:n,setDidOpenUnavailableAssets:s,isLocked:r,setLocked:a,setItemsInBag:o})=>({itemsInBag:e,setBagStatus:t,didOpenUnavailableAssets:n,setDidOpenUnavailableAssets:s,isLocked:r,setLocked:a,setItemsInBag:o}))),d=_e((e=>e.tokenTradeInput)),l=(0,C.useMemo)((()=>(0,G.cv)(t)),[t]),[u]=(0,oe.useNftRouteLazyQuery)(),c=Ce(),p=(0,C.useCallback)((()=>{s&&r(!1),!a&&o(!0),n(M.rm.FETCHING_ROUTE)}),[a,s,o,n,r]);return(0,C.useCallback)(Fe((function*(){p(),u({variables:{senderAddress:e.address?e.address:"",nftTrades:Oe(l),tokenTrades:d||void 0},onCompleted:e=>{if(!e.nftRoute||!e.nftRoute.route)return n(M.rm.ADDING_TO_BAG),void o(!1);const t=function(e){return e.filter((e=>e.status!==M.o9.UNAVAILABLE)).map((e=>e.asset))}(l),s=!!d,{route:r,routeResponse:a}=Ue(e.nftRoute,s),{newBagItems:u,nextBagStatus:p}=He(t,r,s);if(i(u),n(p),p===M.rm.CONFIRMING_IN_WALLET)return c(a,t,s),void o(!0);o(!1)}})})),[e.address,u,l,c,p,o,n,i,d])}var Me=n(81912),Ge=n(99759);function Ve(e){return e.map((e=>function(e){const t="fee"in e,n=(0,ie.isUniverseChainId)(e.chainId)?(0,Ge.getChainInfo)(e.chainId).nativeCurrency.address:Ge.DEFAULT_NATIVE_ADDRESS;return{pair:t?void 0:{tokenAmountA:{amount:e.reserve0.quotient.toString(),token:{address:e.token0.address,chainId:e.token0.chainId,decimals:e.token0.decimals,isNative:e.token0.isNative}},tokenAmountB:{amount:e.reserve1.quotient.toString(),token:{address:e.token1.address,chainId:e.token1.chainId,decimals:e.token1.decimals,isNative:e.token1.isNative}}},pool:t?{fee:e.fee,liquidity:e.liquidity.toString(),sqrtRatioX96:e.sqrtRatioX96.toString(),tickCurrent:e.tickCurrent.toString(),tokenA:{address:"address"in e.token0?e.token0.address:n,chainId:e.token0.chainId,decimals:e.token0.decimals,isNative:e.token0.isNative},tokenB:{address:"address"in e.token1?e.token1.address:n,chainId:e.token1.chainId,decimals:e.token1.decimals,isNative:e.token1.isNative}}:void 0}}(e)))}function Ke(e){return{...(t={inputAmount:e.inputAmount,outputAmount:e.outputAmount},{inputAmount:{amount:t.inputAmount.quotient.toString(),token:{address:t.inputAmount.currency.isToken?t.inputAmount.currency.address:Ge.DEFAULT_NATIVE_ADDRESS,chainId:t.inputAmount.currency.chainId,decimals:t.inputAmount.currency.decimals,isNative:t.inputAmount.currency.isNative}},outputAmount:{amount:t.outputAmount.quotient.toString(),token:{address:t.outputAmount.currency.isToken?t.outputAmount.currency.address:Ge.DEFAULT_NATIVE_ADDRESS,chainId:t.outputAmount.currency.chainId,decimals:t.outputAmount.currency.decimals,isNative:t.outputAmount.currency.isNative}}}),pools:Ve(e.route.pools)};var t}function We(e,t,n){const s=_e((e=>e.setTokenTradeInput)),r=(0,we.B3)(e)&&e.routes,a=!!e&&!!e.inputAmount&&e.inputAmount.currency.isToken,o=!!n&&!!t;(0,C.useEffect)((()=>{if(!r||!a||!o)return void s(void 0);const i=parseInt(n.multiply(100).toSignificant(2)),{mixedTokenTradeRouteInputs:d,v2TokenTradeRouteInputs:l,v3TokenTradeRouteInputs:u}=function(e){const t=[],n=[],s=[],r=e.swaps;for(const a of r)a.route.protocol===Me.Protocol.MIXED?t.push(Ke(a)):a.route.protocol===Me.Protocol.V2?n.push(Ke(a)):s.push(Ke(a));return{mixedTokenTradeRouteInputs:t.length>0?t:void 0,v2TokenTradeRouteInputs:n.length>0?n:void 0,v3TokenTradeRouteInputs:s.length>0?s:void 0}}(e),c={mixedRoutes:d,tradeType:oe.TokenTradeType.ExactOutput,v2Routes:l,v3Routes:u},p="permitSignature"in t&&t.permitSignature?{details:{amount:t.permitSignature.details.amount.toString(),expiration:t.permitSignature.details.expiration.toString(),nonce:t.permitSignature.details.nonce.toString(),token:t.permitSignature.details.token},sigDeadline:t.permitSignature.sigDeadline.toString(),signature:t.permitSignature.signature,spender:t.permitSignature.spender}:void 0;s({permit:p,routes:c,slippageToleranceBasisPoints:i,tokenAmount:{amount:e.inputAmount.quotient.toString(),token:{address:e.inputAmount.currency.address,chainId:e.inputAmount.currency.chainId,decimals:e.inputAmount.currency.decimals,isNative:e.inputAmount.currency.isNative}}})}),[t,n,o,a,r,s,e])}var qe=n(49008);var Ye=n(83799),Xe=n(91144),Qe=n(66954),Ze=n(7740),Je=n(88438);const et=d.Ay.div`
  padding: 0px 12px;
`,tt=d.Ay.div`
  border-top: 1px solid ${({theme:e})=>e.surface3};
  color: ${({theme:e})=>e.neutral1};
  display: flex;
  flex-direction: column;
  margin: 0px 16px 8px;
  padding: 12px 0px;
  border-bottom-left-radius: 12px;
  border-bottom-right-radius: 12px;
`,nt=(0,d.Ay)(ne.Ay)`
  padding-top: 8px;
  padding-bottom: 16px;
`,st=(0,d.Ay)(se.Ay)`
  justify-content: space-between;
  align-items: start;
  gap: 8px;
`,rt=(0,d.Ay)(ne.Ay)`
  text-align: end;
  overflow: hidden;
`,at=(0,d.Ay)(Ye.A)`
  width: 14px;
  margin-right: 4px;
  color: inherit;
`,ot=(0,d.Ay)(Qe.P.BodyPrimary)`
  align-items: center;
  color: ${({$color:e})=>e};
  display: flex;
  justify-content: center;
  margin-bottom: 10px !important;
  text-align: center;
`,it=(0,d.Ay)(Qe.P.BodySmall)`
  color: ${({$color:e})=>e};
  display: flex;
  justify-content: center;
  text-align: center;
  margin-bottom: 10px !important;
`,dt=(0,d.Ay)(se.Ay)`
  gap: 8px;
  cursor: pointer;
`,lt=d.Ay.button`
  display: flex;
  background: ${({$backgroundColor:e})=>e};
  color: ${({$color:e})=>e};
  font-weight: 535;
  line-height: 24px;
  font-size: 16px;
  gap: 16px;
  justify-content: center;
  border: none;
  border-radius: 12px;
  padding: 12px 0px;
  cursor: pointer;
  align-items: center;

  &:disabled {
    opacity: 0.6;
    cursor: auto;
  }
`,ut=(0,d.Ay)(ee.P)`
  border-radius: 4px;
  width: 4rem;
  height: 20px;
  align-self: end;
`,ct=(0,d.Ay)(se.Ay)`
  align-items: center;
  gap: 8px;
  width: 100%;
  justify-content: flex-end;
`,pt=(0,d.Ay)(se.Ay)`
  align-items: center;
  gap: 8px;
`,mt=(0,d.Ay)(Qe.P.BodyPrimary)`
  line-height: 20px;
  font-weight: 535;
  overflow-x: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  scrollbar-width: none;

  ::-webkit-scrollbar {
    display: none;
  }
`,ft=({color:e,children:t})=>t?(0,s.jsxs)(ot,{"data-testid":"nft-buy-button-warning",fontSize:"14px",lineHeight:"20px",$color:e,children:[(0,s.jsx)(at,{}),t]}):null,gt=({children:e,color:t})=>e?(0,s.jsx)(it,{lineHeight:"16px",$color:t,children:e}):null,xt=({usingPayWithAnyToken:e,totalEthPrice:t,activeCurrency:n,tradeState:r,trade:a})=>{var o;const{formatEther:i,formatNumberOrString:d}=(0,S.kc)();var l;return e?r!==ke.yz.LOADING||a?(0,s.jsx)(mt,{color:r===ke.yz.LOADING?"neutral3":"neutral1",children:d({input:null===(o=a)||void 0===o?void 0:o.inputAmount.toExact(),type:S.wl.NFTToken})}):(0,s.jsx)(Qe.P.BodyPrimary,{color:"neutral3",lineHeight:"20px",fontWeight:"535",children:(0,s.jsx)(he.Trans,{i18nKey:"swap.fetchingPrice"})}):(0,s.jsxs)(Qe.P.BodyPrimary,{lineHeight:"20px",fontWeight:"535",children:[i({input:t.toString(),type:S.wl.NFTToken}),"\xa0",(null===(l=n)||void 0===l?void 0:l.symbol)??"ETH"]})},ht=({usdcValue:e,priceImpact:t,tradeState:n,usingPayWithAnyToken:r})=>{var a;const{t:o}=(0,he.useTranslation)(),{formatNumberOrString:i}=(0,S.kc)();return e?(0,s.jsxs)(ct,{children:[t&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(te.PD,{text:o("swap.estimatedDifference.label"),children:(0,s.jsxs)(pt,{children:[(0,s.jsx)(Ye.A,{color:t.priceImpactSeverity.color,size:"16px"}),(0,s.jsxs)(Qe.P.BodySmall,{style:{color:t.priceImpactSeverity.color},lineHeight:"20px",children:["(",t.displayPercentage(),")"]})]})})}),(0,s.jsx)(Qe.P.BodySmall,{color:"neutral3",lineHeight:"20px",children:`${i({input:null===(a=e)||void 0===a?void 0:a.toExact(),type:S.wl.FiatNFTToken})}`})]}):!r||n!==ke.yz.INVALID&&n!==ke.yz.NO_ROUTE_FOUND?(0,s.jsx)(ut,{}):null},yt=[M.rm.FETCHING_ROUTE,M.rm.CONFIRMING_IN_WALLET,M.rm.FETCHING_FINAL_ROUTE,M.rm.PROCESSING_TRANSACTION],vt=({setModalIsOpen:e,eventProperties:t})=>{var n,a,o,i;const d=(0,X.O)(),l=(0,I.useTheme)(),u=(0,le.F)(),p=(0,Ze.oe)(u.chainId),m=u.isConnected&&u.chainId,f=(0,Ie.y)(),{inputCurrency:g}=_e((({inputCurrency:e})=>({inputCurrency:e}))),x=_e((e=>e.setInputCurrency)),h=(0,de.H2)("ETH"),y=(0,fe.nC)(u.address,g&&g.isToken?g:void 0),{isLocked:v,bagStatus:A,setBagExpanded:T,setBagStatus:k}=(0,F.s)((({isLocked:e,bagStatus:t,setBagExpanded:n,setBagStatus:s})=>({isLocked:e,bagStatus:t,setBagExpanded:n,setBagStatus:s}))),[w,b]=(0,C.useState)(!1),N=yt.includes(A),E=g??h,P=!!g&&u.chainId===ie.UniverseChainId.Mainnet,{universalRouterAddress:j,universalRouterAddressIsLoading:_}=function(){var e,t;const{data:n,loading:s}=(0,oe.useNftUniversalRouterAddressQuery)({fetchPolicy:"no-cache"});return{universalRouterAddress:null===(t=n)||void 0===t||null===(e=t.nftRoute)||void 0===e?void 0:e.toAddress,universalRouterAddressIsLoading:s}}();!function(e){const t=(0,Ne.s)((e=>e.state)),n=(0,Ne.s)((e=>e.setState)),s=(0,C.useRef)(t),{setBagStatus:r,setLocked:a}=(0,F.s)((({setBagExpanded:e,setBagStatus:t,setLocked:n})=>({setBagExpanded:e,setBagStatus:t,setLocked:n})));(0,C.useEffect)((()=>{Ne.s.subscribe((e=>s.current=e.state))}),[]),(0,C.useEffect)((()=>{s.current===M.Of.Confirming&&r(M.rm.PROCESSING_TRANSACTION),s.current!==M.Of.Denied&&s.current!==M.Of.Invalid||(s.current===M.Of.Invalid?r(M.rm.WARNING):r(M.rm.CONFIRM_REVIEW),n(M.Of.New),a(!1),e(!1))}),[a,r,e,n,s.current])}(e);const O=$e(),R=(0,C.useMemo)((()=>(0,ge.A)((0,c.formatEther)(f.toString()),h??void 0)),[h,f]),{state:L,trade:D,maximumAmountIn:H,allowedSlippage:z}=function(e,t){const{state:n,trade:s}=(0,Te.l)(Y.TradeType.EXACT_OUTPUT,t,e??void 0,ke.nj.API),r=(0,Ae.A)((0,we.B3)(s)?s:void 0),a=(0,C.useMemo)((()=>{var e,t;const n=null===(e=s)||void 0===e?void 0:e.maximumAmountIn(r);return(null===(t=n)||void 0===t?void 0:t.currency.isToken)?n:void 0}),[r,s]);return(0,C.useMemo)((()=>({state:n,trade:s,maximumAmountIn:a,allowedSlippage:r})),[r,a,n,s])}(P?g:void 0,R),U=(0,ue.A)(H,function(e,t){if(e)return e===ie.UniverseChainId.Mainnet?t??(0,ae.UNIVERSAL_ROUTER_ADDRESS)(ae.UniversalRouterVersion.V1_2,e):(0,ae.UNIVERSAL_ROUTER_ADDRESS)(ae.UniversalRouterVersion.V1_2,e)}(p?u.chainId:void 0,j),ke.ao.Classic),B=U.state===ue.e.LOADING||_;We(D,U,z);const $=function(e){const t=(0,I.useTheme)(),{formatPercent:n}=(0,S.kc)();return(0,C.useMemo)((()=>{const s=e?(0,qe.HA)(e):void 0,r=s?(0,qe.a3)(s):void 0,a="error"===r?t.critical:"warning"===r?t.deprecated_accentWarning:void 0;return s&&r&&a?{priceImpactSeverity:{type:r,color:a},displayPercentage:()=>n(s)}:void 0}),[n,t.critical,t.deprecated_accentWarning,e])}(D),G=(0,Je.useUSDCValue)(null===(n=D)||void 0===n?void 0:n.inputAmount),V=(0,Je.useUSDCValue)(R),q=P?G:V,ee=(0,de.H2)(re.E),te=(0,fe.Ay)(u.address??void 0,ee),se=(0,C.useMemo)((()=>{var e;if(!m||u.chainId!==ie.UniverseChainId.Mainnet)return;if(g){var t;const e=null===(t=D)||void 0===t?void 0:t.inputAmount;if(!y||!e)return;return!y.lessThan(e)}if(!ee)return;const n=Y.CurrencyAmount.fromRawAmount(ee,me().BigInt(f));return null===(e=te)||void 0===e?void 0:e.greaterThan(n)}),[m,u.chainId,g,ee,f,te,null===(a=D)||void 0===a?void 0:a.inputAmount,y]);(0,C.useEffect)((()=>{k(M.rm.ADDING_TO_BAG)}),[g,k]);const pe=(0,ce.R)(),{buttonText:xe,buttonTextColor:be,disabled:Ee,warningText:Pe,warningTextColor:Ce,helperText:je,helperTextColor:Se,handleClick:Oe,buttonColor:Re}=(0,C.useMemo)((()=>{if(m&&u.chainId!==ie.UniverseChainId.Mainnet){const e=()=>pe(ie.UniverseChainId.Mainnet);return ve(ye.NOT_SUPPORTED_CHAIN,l,e)}if(!1===se)return ve(ye.INSUFFICIENT_BALANCE,l);if(A===M.rm.WARNING)return ve(ye.ERROR,l);if(!m){const e=()=>{d.open(),T({bagExpanded:!1})};return ve(ye.WALLET_NOT_CONNECTED,l,e)}if(A===M.rm.FETCHING_FINAL_ROUTE||A===M.rm.CONFIRMING_IN_WALLET)return ve(ye.IN_WALLET_CONFIRMATION,l);if(A===M.rm.PROCESSING_TRANSACTION)return ve(ye.PROCESSING_TRANSACTION,l);if(P&&L!==ke.yz.VALID)return L===ke.yz.INVALID?ve(ye.INVALID_TOKEN_ROUTE,l):L===ke.yz.NO_ROUTE_FOUND?ve(ye.NO_TOKEN_ROUTE_FOUND,l):ve(ye.FETCHING_TOKEN_ROUTE,l);const e=U.state===ue.e.REQUIRED,t=()=>e&&U.approveAndPermit();return B?ve(ye.LOADING_ALLOWANCE,l,t):e?U.isApprovalPending?ve(ye.IN_WALLET_ALLOWANCE_APPROVAL,l,t):U.isApprovalLoading?ve(ye.PROCESSING_APPROVAL,l,t):ve(ye.REQUIRE_APPROVAL,l,t):A===M.rm.CONFIRM_QUOTE?ve(ye.CONFIRM_UPDATED_PRICE,l,O):$&&"error"===$.priceImpactSeverity.type?ve(ye.PRICE_IMPACT_HIGH,l,O,P,$):ve(ye.PAY,l,O,P)}),[m,u.chainId,se,A,P,L,B,U,$,l,O,pe,d,T]),Le={usd_value:null===(o=q)||void 0===o?void 0:o.toExact(),using_erc20:!!g,...t};return(0,s.jsxs)(et,{children:[(0,s.jsxs)(tt,{children:[(0,s.jsxs)(nt,{gap:"xs",children:[(0,s.jsxs)(st,{children:[(0,s.jsx)(ne.Ay,{gap:"xs",children:p&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Qe.P.SubHeaderSmall,{children:(0,s.jsx)(he.Trans,{i18nKey:"swap.payWith"})}),(0,s.jsxs)(dt,{onClick:()=>{v||(b(!0),(0,W.sendAnalyticsEvent)(r.c6.NFT_BUY_TOKEN_SELECTOR_CLICKED))},children:[(0,s.jsx)(Z.A,{currency:E,size:24}),(0,s.jsx)(Qe.P.HeadlineSmall,{fontWeight:535,lineHeight:"24px",children:null===(i=E)||void 0===i?void 0:i.symbol}),(0,s.jsx)(Xe.A,{size:20,color:l.neutral2})]})]})}),(0,s.jsxs)(rt,{gap:"xs",children:[(0,s.jsx)(Qe.P.SubHeaderSmall,{children:(0,s.jsx)(he.Trans,{i18nKey:"swap.total"})}),(0,s.jsx)(xt,{usingPayWithAnyToken:P,totalEthPrice:f,activeCurrency:E,tradeState:L,trade:D})]})]}),(0,s.jsx)(ht,{usdcValue:q,priceImpact:$,tradeState:L,usingPayWithAnyToken:P})]}),(0,s.jsxs)(K.default,{logPress:!0,eventOnTrigger:r.c6.NFT_BUY_BAG_PAY,element:r.nM.NFT_BUY_BAG_PAY_BUTTON,properties:Le,logImpression:m&&!Ee,children:[(0,s.jsx)(ft,{color:Ce,children:Pe}),(0,s.jsx)(gt,{color:Se,children:je}),(0,s.jsxs)(lt,{"data-testid":"nft-buy-button",onClick:Oe,disabled:Ee||N,$backgroundColor:Re,$color:be,children:[N&&(0,s.jsx)(Q.Ay,{size:"20px",stroke:"white"}),xe]})]})]}),(0,s.jsx)(J.A,{isOpen:w,onDismiss:()=>b(!1),onCurrencySelect:e=>{x(e.isNative?void 0:e),e.isToken&&(0,W.sendAnalyticsEvent)(r.c6.NFT_BUY_TOKEN_SELECTED,{token_address:e.address,token_symbol:e.symbol})},selectedCurrency:E??void 0})]})};var It=n(79865),At=n(4163);const Tt=(0,d.Ay)(At.C3)`
  color: ${({theme:e})=>e.neutral2};
  cursor: pointer;
  font-weight: 535;
  font-size: 14px;
  line-height: 16px;

  :active {
    text-decoration: none;
  }
`,kt=d.Ay.button`
  align-items: center;
  background-color: transparent;
  border-radius: 8px;
  border: none;
  color: ${({theme:e})=>e.neutral1};
  cursor: pointer;
  display: flex;
  flex-direction: row;
  justify-content: flex-end;
  margin-left: auto;
  padding: 2px;
  opacity: 1;

  ${It.N}
`,wt=d.Ay.div`
  align-items: center;
  background-color: ${({theme:e})=>e.accent1};
  border-radius: 100px;
  font-weight: bold;
  color: ${({theme:e})=>e.deprecated_accentTextLightPrimary};
  display: flex;
  font-size: 10px;
  justify-content: center;
  min-width: ${({sizing:e})=>e};
  min-height: ${({sizing:e})=>e};
  padding: 4px 6px;
`,bt=d.Ay.div`
  align-items: center;
  display: flex;
  flex-direction: row;
  gap: 8px;
  justify-content: flex-start;
  margin: 16px 28px;
  text-align: center;
`,Nt=({numberOfAssets:e,closeBag:t,resetFlow:n,isProfilePage:r})=>{const a=(0,C.useMemo)((()=>(e=>17+6*e.toString().length+"px")(e)),[e]);return(0,s.jsxs)(bt,{children:[(0,s.jsx)(Qe.P.HeadlineSmall,{children:r?(0,s.jsx)(he.Trans,{i18nKey:"common.sell.label"}):(0,s.jsx)(he.Trans,{i18nKey:"nft.bag"})}),e>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(wt,{sizing:a,children:e}),(0,s.jsx)(Tt,{onClick:n,children:(0,s.jsx)(he.Trans,{i18nKey:"tokens.selector.button.clear"})})]}),(0,s.jsx)(kt,{onClick:t,children:(0,s.jsx)(b.Iu,{"data-testid":"nft-bag-close-icon"})})]})};var Et=n(41723);const Pt=(0,d.Ay)(l.VP)`
  gap: 12px;
  margin-top: 68px;
`,Ct=()=>{const e=(0,i.x1)(i.g6.NFTS_PROFILE);return(0,s.jsxs)(Pt,{children:[(0,s.jsx)(l.ov,{children:e?(0,s.jsx)(b.j9,{color:Et.G6.colors.neutral3}):(0,s.jsx)(b.UH,{color:Et.G6.colors.neutral3,height:"96px",width:"96px",strokeWidth:"1px"})}),e?(0,s.jsx)(l.ov,{"data-testid":"nft-no-nfts-selected",className:N.Hu,children:"No NFTs selected"}):(0,s.jsxs)(l.VP,{gap:"16",children:[(0,s.jsx)(l.ov,{"data-testid":"nft-empty-bag",className:N.Hu,style:{lineHeight:"24px"},children:"Your bag is empty"}),(0,s.jsx)(l.ov,{fontSize:"12",fontWeight:"book",color:"neutral2",style:{lineHeight:"16px"},children:"Selected NFTs will appear here"})]})]})};var jt=n(90069);const St=({asset:e})=>{const t=(0,jt.a)((e=>e.removeSellAsset)),n=(0,o.a)(),[r,i]=(0,C.useState)(!1),d=()=>i(!r),u=n=>{n.preventDefault(),n.stopPropagation(),t(e)};return(0,s.jsxs)(l.fI,{className:g,onMouseEnter:d,onMouseLeave:d,children:[(0,s.jsxs)(a.a,{position:"relative",display:"flex",children:[n&&(0,s.jsx)(L,{onClick:u}),(0,s.jsx)("img",{src:e.smallImageUrl,alt:e.name,className:x})]}),(0,s.jsxs)(l.VP,{overflow:"hidden",width:"full",color:"neutral1",children:[(0,s.jsx)(l.fI,{overflow:"hidden",width:"full",justifyContent:"space-between",whiteSpace:"nowrap",gap:"16",children:(0,s.jsx)(a.a,{className:f,children:e.name||`#${e.tokenId}`})}),(0,s.jsxs)(l.fI,{overflow:"hidden",whiteSpace:"nowrap",gap:"2",children:[(0,s.jsx)(a.a,{className:h,children:e.asset_contract.name}),e.collectionIsVerified&&(0,s.jsx)(b.M3,{className:v})]})]}),r&&!n&&(0,s.jsx)(_,{onClick:u,emphasis:m.jG.medium,size:m.Mp.medium,children:"Remove"})]})},_t=()=>{const e=(0,jt.a)((e=>e.sellAssets));return(0,s.jsx)(l.VP,{children:e.length?e.map(((e,t)=>(0,s.jsx)(St,{asset:e},t))):null})};var Ot=n(87654),Rt=n(94270),Lt=n(41698);var Dt=n(4852),Ht=n(17960);const zt=320,Ut=360,Bt=d.Ay.div`
  position: fixed;
  display: flex;
  flex-direction: column;
  top: 88px;
  right: 20px;
  width: ${zt}px;
  height: calc(100vh - 108px);
  background: ${({theme:e})=>e.surface1};
  border: 1px solid ${({theme:e})=>e.surface3};
  border-radius: 16px;
  box-shadow: ${({theme:e})=>e.deprecated_shallowShadow};
  z-index: ${({raiseZIndex:e,isProfilePage:t})=>e?t?Ht.M.modalOverTooltip:Ht.M.modalBackdrop-1:3};

  @media only screen and (max-width: ${({theme:e})=>`${e.breakpoint.sm}px`}) {
    right: 0px;
    top: 0px;
    width: 100%;
    height: 100%;
    border-radius: 0px;
    border: none;
  }

  @media only screen and (min-width: ${({theme:e})=>`${e.breakpoint.xxxl}px`}) {
    width: ${Ut}px;
  }
`,Ft=d.Ay.div`
  position: fixed;
  background: rgba(0, 0, 0, 0.7);
  top: 0px;
  width: 100%;
  height: 100%;
`,$t=d.Ay.div`
  background: ${({theme:e})=>e.accent1};
  color: ${({theme:e})=>e.deprecated_accentTextLightPrimary};
  margin: 32px 28px 16px;
  padding: 10px 0px;
  border-radius: 12px;
  text-align: center;
  font-size: 16px;
  font-weight: 535;
  line-height: 20px;
  cursor: pointer;
  transition: ${({theme:e})=>e.transition.duration.medium};

  :hover {
    opacity: ${({theme:e})=>e.opacity.hover};
  }
`,Mt=({top:e,show:t})=>(0,s.jsx)(a.a,{marginX:"24",borderWidth:"1px",borderStyle:"solid",borderColor:"transparent",borderTopColor:e?"transparent":"surface3",borderBottomColor:e?"surface3":"transparent",opacity:t?"1":"0",transition:"250"}),Gt=()=>{const{resetSellAssets:e,sellAssets:t}=(0,jt.a)((({reset:e,sellAssets:t})=>({resetSellAssets:e,sellAssets:t}))),{setProfilePageState:n}=(0,Lt.N)((({setProfilePageState:e})=>({setProfilePageState:e}))),{bagStatus:a,bagIsLocked:d,reset:u,bagExpanded:c,toggleBag:p,setBagExpanded:m}=(0,F.s)((e=>({...e,bagIsLocked:e.isLocked,uncheckedItemsInBag:e.itemsInBag}))),{uncheckedItemsInBag:f}=(0,F.s)((({itemsInBag:e})=>({uncheckedItemsInBag:e}))),g=(0,i.x1)(i.g6.NFTS_PROFILE),x=(0,i.x1)(i.g6.NFTS_DETAILS),h=(0,i.x1)(i.g6.NFTS),y=(0,o.a)(),v=(0,C.useMemo)((()=>(0,G.cv)(f)),[f]),[I,A]=(0,C.useState)(!1),{userCanScroll:T,scrollRef:k,scrollProgress:w,scrollHandler:b}=function(){const[e,t]=(0,C.useState)(!1),[n,s]=(0,C.useState)(0);return{scrollRef:n=>{if(null!==n){const s=n.scrollHeight>n.clientHeight;s!==e&&t(s)}},scrollHandler:e=>{const t=e.currentTarget.scrollTop,n=e.currentTarget.clientHeight,r=e.currentTarget.scrollHeight;s(t?(t+n)/r*100:0)},scrollProgress:n,userCanScroll:e}}(),N=(0,C.useCallback)((()=>{m({bagExpanded:!1,manualClose:!0})}),[m]);(0,C.useEffect)((()=>{d&&!I&&A(!0)}),[d,I]);const E=v.length>0,P=v.length>0,j=t.length>0,S=Boolean(!g&&!P&&a===M.rm.ADDING_TO_BAG||g&&!j),_=(0,C.useMemo)((()=>({...(0,V.N)(v.map((e=>e.asset)))})),[v]);return c&&h?(0,s.jsxs)(Ot.Z,{children:[(0,s.jsxs)(Bt,{"data-testid":"nft-bag",raiseZIndex:y||I,isProfilePage:g,children:[(0,s.jsx)(Nt,{numberOfAssets:g?t.length:v.length,closeBag:N,resetFlow:g?e:u,isProfilePage:g}),S&&(0,s.jsx)(Ct,{}),(0,s.jsx)(Mt,{top:!0,show:T&&w>0}),(0,s.jsx)(l.VP,{ref:k,className:"_1jcz50r1 rgw6ez2ef rgw6ez2jx rgw6ez1yr rgw6ez8ct",onScroll:b,gap:"12",children:g?(0,s.jsx)(_t,{}):(0,s.jsx)(q,{})}),E&&!g&&(0,s.jsx)(vt,{setModalIsOpen:A,eventProperties:_}),j&&g&&(0,s.jsx)($t,{onClick:()=>{p(),n(Dt.A.LISTING),(0,W.sendAnalyticsEvent)(r.c6.NFT_PROFILE_PAGE_START_SELL,{list_quantity:t.length,collection_addresses:t.map((e=>e.asset_contract.address)),token_ids:t.map((e=>e.tokenId))})},children:(0,s.jsx)(he.Trans,{i18nKey:"common.button.continue"})})]}),x?(0,s.jsx)(Ft,{onClick:p}):I&&(0,s.jsx)(Rt.h,{onClick:()=>d?void 0:A(!1)})]}):null}},94270:(e,t,n)=>{n.d(t,{h:()=>i,d:()=>o});var s=n(95682),r=n(46529),a=(n(91103),n(28244));const o=e=>{e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},i=({onClick:e=a.default})=>(0,s.jsx)(r.a,{className:"_199qdl71 rgw6ez3f3 rgw6ez343 rgw6ez17l rgw6ez1ef rgw6ez48r rgw6ez44l rgw6ez4u3",onClick:e})},46973:(e,t,n)=>{n.d(t,{y:()=>c,z:()=>p});var s=n(55043),r=n(23974),a=n(65475),o=n(5525),i=n(76191),d=n(74888),l=n(33962),u=n(88438);function c(){const e=(0,i.s)((e=>e.itemsInBag));return(0,l.useMemo)((()=>e.reduce(((e,t)=>t.status!==d.o9.UNAVAILABLE?e.add(s.gH.from(t.asset.updatedPriceInfo?t.asset.updatedPriceInfo.ETHPrice:t.asset.priceInfo.ETHPrice)):e),s.gH.from(0))),[e])}function p(){const e=c(),t=(0,a.H2)("ETH"),n=(0,l.useMemo)((()=>(0,o.A)((0,r.formatEther)(e.toString()),t??void 0)),[t,e]),s=(0,u.useUSDCValue)(n);return(0,l.useMemo)((()=>{var e;return null===(e=s)||void 0===e?void 0:e.toExact()}),[s])}},26908:(e,t,n)=>{n.d(t,{s:()=>h});var s=n(2818),r=n(55043),a=n(96370),o=n(29477);const i=JSON.parse('[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"punksOfferedForSale","outputs":[{"name":"isForSale","type":"bool"},{"name":"punkIndex","type":"uint256"},{"name":"seller","type":"address"},{"name":"minValue","type":"uint256"},{"name":"onlySellTo","type":"address"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"punkIndex","type":"uint256"}],"name":"enterBidForPunk","outputs":[],"payable":true,"type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"punkIndex","type":"uint256"},{"name":"minPrice","type":"uint256"}],"name":"acceptBidForPunk","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"addresses","type":"address[]"},{"name":"indices","type":"uint256[]"}],"name":"setInitialOwners","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"withdraw","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"imageHash","outputs":[{"name":"","type":"string"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"nextPunkIndexToAssign","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"punkIndexToAddress","outputs":[{"name":"","type":"address"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"standard","outputs":[{"name":"","type":"string"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"punkBids","outputs":[{"name":"hasBid","type":"bool"},{"name":"punkIndex","type":"uint256"},{"name":"bidder","type":"address"},{"name":"value","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"balanceOf","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"allInitialOwnersAssigned","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"allPunksAssigned","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"punkIndex","type":"uint256"}],"name":"buyPunk","outputs":[],"payable":true,"type":"function"},{"constant":false,"inputs":[{"name":"to","type":"address"},{"name":"punkIndex","type":"uint256"}],"name":"transferPunk","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"punkIndex","type":"uint256"}],"name":"withdrawBidForPunk","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"to","type":"address"},{"name":"punkIndex","type":"uint256"}],"name":"setInitialOwner","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"punkIndex","type":"uint256"},{"name":"minSalePriceInWei","type":"uint256"},{"name":"toAddress","type":"address"}],"name":"offerPunkForSaleToAddress","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"punksRemainingToAssign","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"punkIndex","type":"uint256"},{"name":"minSalePriceInWei","type":"uint256"}],"name":"offerPunkForSale","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"punkIndex","type":"uint256"}],"name":"getPunk","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"pendingWithdrawals","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"punkIndex","type":"uint256"}],"name":"punkNoLongerForSale","outputs":[],"payable":false,"type":"function"},{"inputs":[],"payable":true,"type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"punkIndex","type":"uint256"}],"name":"Assign","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"punkIndex","type":"uint256"}],"name":"PunkTransfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"punkIndex","type":"uint256"},{"indexed":false,"name":"minValue","type":"uint256"},{"indexed":true,"name":"toAddress","type":"address"}],"name":"PunkOffered","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"punkIndex","type":"uint256"},{"indexed":false,"name":"value","type":"uint256"},{"indexed":true,"name":"fromAddress","type":"address"}],"name":"PunkBidEntered","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"punkIndex","type":"uint256"},{"indexed":false,"name":"value","type":"uint256"},{"indexed":true,"name":"fromAddress","type":"address"}],"name":"PunkBidWithdrawn","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"punkIndex","type":"uint256"},{"indexed":false,"name":"value","type":"uint256"},{"indexed":true,"name":"fromAddress","type":"address"},{"indexed":true,"name":"toAddress","type":"address"}],"name":"PunkBought","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"punkIndex","type":"uint256"}],"name":"PunkNoLongerForSale","type":"event"}]');var d=n(74888),l=n(52689),u=n(60546),c=n(21094),p=n(53412),m=n(2303),f=n(38089),g=n(98267);function x(e,t,n,s,r,a,o){try{var i=e[a](o),d=i.value}catch(l){return void n(l)}i.done?t(d):Promise.resolve(d).then(s,r)}const h=(0,f.vt)()((0,g.lt)((e=>({state:d.Of.New,txHash:"",purchasedWithErc20:!1,clearTxHash:()=>e({txHash:""}),setState:t=>e((()=>({state:t}))),sendTransaction:function(){var t,n=(t=function*(t,n,s,a){const i=yield t.getAddress();try{const l={to:s.to,value:s.valueToSend?r.gH.from(s.valueToSend):void 0,data:s.data},u=(yield t.estimateGas(l)).mul(105).div(100),c={...l,gasLimit:u};e({state:d.Of.Signing});const m=yield t.sendTransaction(c);e({state:d.Of.Confirming}),e({txHash:m.hash}),e({purchasedWithErc20:a}),(0,p.sendAnalyticsEvent)(o.c6.NFT_BUY_BAG_SIGNED,{transaction_hash:m.hash});const f=yield m.wait();if(1===f.status){const t=y(f,i,n,s.route),r=v(n,t);return e({state:d.Of.Success}),{nftsPurchased:t,nftsNotPurchased:r,txReceipt:f}}return e({state:d.Of.Failed}),{nftsPurchased:[],nftsNotPurchased:n,txReceipt:f}}catch(l){return void(4001===l.code?e({state:d.Of.Denied}):(m.logger.error(l,{tags:{file:"nft/hooks/useSendTransaction",function:"useSendTransaction"}}),e({state:d.Of.Invalid})))}},function(){var e=this,n=arguments;return new Promise((function(s,r){var a=t.apply(e,n);function o(e){x(a,s,r,o,i,"next",e)}function i(e){x(a,s,r,o,i,"throw",e)}o(void 0)}))});return function(e,t,s,r){return n.apply(this,arguments)}}()})),{name:"useSendTransactionState"})),y=(e,t,n,r)=>{if(!e.logs)return[];const o=new s.KA(c),d=new s.KA(u),p=new s.KA(i),m=[...e.logs.filter((e=>e.topics[0]===o.getEventTopic("Transfer")&&(0,a.hexStripZeros)(e.topics[2]).toLowerCase()===t.toLowerCase())).map((e=>({address:e.address,tokenId:parseInt(e.topics[3]).toString()}))),...e.logs.filter((e=>e.topics[0]===d.getEventTopic("TransferSingle")&&(0,a.hexStripZeros)(e.topics[3]).toLowerCase()===t.toLowerCase())).map((e=>({address:e.address,tokenId:d.parseLog(e).args[3].toString()}))),...e.logs.filter((e=>e.topics[0]===p.getEventTopic("PunkTransfer")&&(0,a.hexStripZeros)(e.topics[2]).toLowerCase()===t.toLowerCase())).map((e=>({address:e.address,tokenId:p.parseLog(e).args[2].toString()})))],f=n.filter((e=>m.some((t=>e.address.toLowerCase()===t.address.toLowerCase()&&parseInt(e.tokenId).toString()===t.tokenId))));return(0,l.Q)(f,r).updatedAssets},v=(e,t)=>{const n=[];return e.forEach((e=>{t.find((t=>t.address.toLowerCase()===e.address.toLowerCase()&&t.tokenId===e.tokenId))||n.push(e)})),n}},45550:(e,t,n)=>{n.d(t,{t:()=>a});var s=n(38089),r=n(98267);const a=(0,s.vt)()((0,r.lt)((e=>({transactionResponse:void 0,setTransactionResponse:t=>e((()=>({transactionResponse:t})))})),{name:"useTransactionResponse"}))},43140:(e,t,n)=>{n.d(t,{M:()=>d,e:()=>l});var s=n(23974),r=n(60347),a=n(31110),o=n(5525),i=n(26179);const d=(e=i.UniverseChainId.Mainnet)=>{var t;const n=(0,a.A)(e),s=(0,o.A)("1",n);return(null===(t=(0,r.v)(s))||void 0===t?void 0:t.data)??0};function l(e){var t,n,r,a;const o=d();return o&&(null===(n=e)||void 0===n||null===(t=n.priceInfo)||void 0===t?void 0:t.ETHPrice)?(parseFloat((0,s.formatEther)(null===(a=e)||void 0===a||null===(r=a.priceInfo)||void 0===r?void 0:r.ETHPrice))*o).toString():""}},35249:(e,t,n)=>{n.d(t,{$4:()=>l,NA:()=>c,Y4:()=>p,uX:()=>u,w2:()=>i,yU:()=>d});var s=n(95682),r=n(94412),a=n(9881),o=n(36046);function i(e,t,n){if(e.has(t))return e.get(t);const s=n&&Array.from(n).reduce(((e,t)=>{var n;return!(!e&&!(null===(n=t)||void 0===n?void 0:n.rarity))}),!1);return s&&e.set(t,s),s}const d=(e,t)=>`/nfts/asset/${void 0!==e.address?e.address:e.asset_contract.address}/${e.tokenId}${t?`?origin=${t}`:""}`,l=(e,t="16")=>{switch(e.toLowerCase()){case a.KD.Opensea:return(0,s.jsx)(r.DL,{width:t,height:t});case a.KD.LooksRare:return(0,s.jsx)(r.Ij,{width:t,height:t});case a.KD.X2Y2:return(0,s.jsx)(r.td,{width:t,height:t,gradientId:(0,o.A)()});case a.KD.Blur:return(0,s.jsx)(r.p7,{width:t,height:t});case a.KD.Sudoswap:return(0,s.jsx)(r.YS,{width:t,height:t});case a.KD.NFTX:return(0,s.jsx)(r._u,{width:t,height:t,gradientId:(0,o.A)()});case a.KD.Gem:return(0,s.jsx)(r.v5,{width:t,height:t,gradientId:(0,o.A)()});case a.KD.Zora:return(0,s.jsx)(r.Cp,{width:t,height:t,gradientId:(0,o.A)()});case a.KD.Ensvision:return(0,s.jsx)(r.qO,{width:t,height:t});case a.KD.Cryptopunks:case"larvalabs":return(0,s.jsx)(r.Mo,{width:t,height:t});case a.KD.Rarible:return(0,s.jsx)(r.Jj,{width:t,height:t});case a.KD.Foundation:return(0,s.jsx)(r.p3,{width:t,height:t});case a.KD.NFT20:return(0,s.jsx)(r.Io,{width:t,height:t});default:return null}},u=e=>`https://twitter.com/intent/tweet?text=Check%20out%20${e.name?encodeURIComponent(e.name):`${e.collectionName}%20%23${e.tokenId}`}%20(${e.collectionName})%20https://app.uniswap.org/nfts/asset/${e.address}/${e.tokenId}%20via%20@uniswap`,c=(e,t)=>{const n=e.length>0&&e.some((t=>t.address!==e[0].address)),s=e.length>0&&!n?`collection/${e[0].address}`:"",r=`I just purchased ${n?`${e.length} NFTs`:`${e.length} ${e[0].collectionName??"NFT"}`} with @Uniswap \ud83e\udd84\n\nhttps://app.uniswap.org/nfts/${s}\n${t}`;return`https://twitter.com/intent/tweet?text=${encodeURIComponent(r)}`};const p=e=>{var t,n,s,r,a;const o=1==e.length?`I just listed ${(null===(t=e[0].collection)||void 0===t?void 0:t.twitterUrl)?`${null===(n=e[0].collection)||void 0===n?void 0:n.twitterUrl} `:`${null===(s=e[0].collection)||void 0===s?void 0:s.name} `??0}${e[0].name} for ${i=e[0].newListings??[],Math.min(...i.map((e=>e.price??0)))??0} ETH on ${null===(r=e[0].marketplaces)||void 0===r?void 0:r.map((e=>e.name)).join(", ")}. Buy it on @Uniswap at https://app.uniswap.org/${d(e[0])}`:`I just listed ${e.length} items on @Uniswap at https://app.uniswap.org/nfts/profile\n\nCollections: ${function(e){const t=e.map((e=>{var t,n;return(null===(t=e.collection)||void 0===t?void 0:t.twitterUrl)??(null===(n=e.collection)||void 0===n?void 0:n.name)??""}));return[...new Set(t)].map((t=>({collection:t,items:e.filter((e=>{var n,s;return(null===(n=e.collection)||void 0===n?void 0:n.twitterUrl)===t||(null===(s=e.collection)||void 0===s?void 0:s.name)===t})).map((e=>e.name??""))})))}(e).map((({collection:e,items:t})=>`${e} ${t.map((e=>e)).join(", ")}`)).join(", ")} \n\nMarketplaces: ${null===(a=e[0].marketplaces)||void 0===a?void 0:a.map((e=>e.name)).join(", ")}`;var i;return`https://twitter.com/intent/tweet?text=${encodeURIComponent(o)}`}},29663:(e,t,n)=>{n.d(t,{J:()=>r,q:()=>s});const s=(e,t)=>{var n,s;if(!e.sellorders||!t.sellorders)return!1;const r=e.sellorders[0].protocolParameters,a=t.sellorders[0].protocolParameters,o=(null===(n=r)||void 0===n?void 0:n.poolAddress)?r.poolAddress:void 0,i=(null===(s=a)||void 0===s?void 0:s.poolAddress)?a.poolAddress:void 0;return!(!o||!i)&&o===i},r=(e,t)=>e.address===t.address&&e.marketplace===t.marketplace},89623:(e,t,n)=>{n.d(t,{N:()=>s});const s=e=>({collection_addresses:e.map((e=>e.address)),token_ids:e.map((e=>e.tokenId)),token_types:e.map((e=>e.tokenType))})},19321:(e,t,n)=>{n.d(t,{WX:()=>c,XO:()=>u,cv:()=>p});var s=n(55043),r=n(9881),a=n(74888),o=n(29663);const i="1000000000000000000",d=s.gH.from("5000000000000000");const l=(e,t=0)=>{if(!e.sellorders)return;const n=(e=>{var t,n,s,r,a,o;return{delta:(null===(t=e)||void 0===t?void 0:t.delta)?e.delta:void 0,fee:(null===(n=e)||void 0===n?void 0:n.ammFeeFixed)?e.ammFeeFixed:void 0,spotPrice:null===(r=e)||void 0===r||null===(s=r.poolMetadata)||void 0===s?void 0:s.spotPrice,bondingCurve:null===(o=e)||void 0===o||null===(a=o.poolMetadata)||void 0===a?void 0:a.bondingCurve}})(e.sellorders[0].protocolParameters);if(!n.fee||!n.delta||!n.spotPrice||!n.bondingCurve)return;let r=s.gH.from(n.spotPrice);const a=s.gH.from(n.delta),o=s.gH.from(n.fee);if("LINEAR"===n.bondingCurve)r=((e,t,n=0)=>{for(let s=0;s<=n;s++)e=e.add(t);return e})(r,a,t);else if("EXPONENTIAL"===n.bondingCurve)r=((e,t,n=0)=>{for(let r=0;r<=n;r++)e=e.mul(t).div(s.gH.from(i));return e})(r,a,t);else{if("XYK"!==n.bondingCurve)return;{const e=((e,t,n=0)=>{let r=s.gH.from(t.spotPrice),a=s.gH.from(t.delta);if(a.sub(s.gH.from(1)).gt(s.gH.from(0))){e=r.div(a.sub(s.gH.from(1)));for(let t=1;t<=n;t++){if(r=r.add(e),a=a.sub(s.gH.from(1)),a.sub(s.gH.from(1)).isZero())return;e=r.div(a.sub(s.gH.from(1)))}return e}})(r,n,t);if(!e)return;r=e}}return((e,t)=>{const n=e.mul(d).div(s.gH.from(i)),r=e.mul(t).div(s.gH.from(i));return e.add(n).add(r)})(r,o).toString()},u=(e,t=0)=>e.sellorders?e.marketplace===r.KD.Sudoswap?l(e,t)??"0":((e,t=0)=>{var n,a,o,i,d,l,u;if(!e.sellorders)return"";let c=s.gH.from(0),p=s.gH.from(0);const m=e.sellorders[0].protocolParameters,f=s.gH.from(1).mul(10).pow(18),g=(null===(n=m)||void 0===n?void 0:n.ammFeePercent)?100*(100+m.ammFeePercent):11e3;if(e.marketplace===r.KD.NFTX){const e=s.gH.from(1).mul(10).pow(16);c=s.gH.from(g).div(100).mul(t+1),c=c.mul(e),p=s.gH.from(g).div(100).mul(t),p=p.mul(e)}e.marketplace===r.KD.NFT20&&(c=s.gH.from(100).mul(t+1),c=c.mul(f),p=s.gH.from(100).mul(t),p=p.mul(f));const x=s.gH.from((null===(i=m)||void 0===i||null===(o=i.poolMetadata)||void 0===o||null===(a=o.ethReserves)||void 0===a?void 0:a.toLocaleString("fullwide",{useGrouping:!1}))??1),h=s.gH.from((null===(u=m)||void 0===u||null===(l=u.poolMetadata)||void 0===l||null===(d=l.tokenReserves)||void 0===d?void 0:d.toLocaleString("fullwide",{useGrouping:!1}))??1),y=x.mul(c).mul(1e3),v=h.sub(c).mul(997),I=x.mul(p).mul(1e3),A=h.sub(p).mul(997);let T=y.div(v);const k=I.div(A);return T=T.sub(k),T=T.mul(101).div(100),T.toString()})(e,t):"",c=(e,t)=>{let n=s.gH.from(0);for(let a=0;a<t;a++)n=e.marketplace===r.KD.Sudoswap?n.add(s.gH.from(l(e,a)??"0")):n.add(s.gH.from(u(e,a)));return n.div(t).toString()},p=e=>{if(!e.some((e=>e.asset.marketplace&&(0,r.qv)(e.asset.marketplace)))||e.every((e=>e.status===a.o9.REVIEWED||e.status===a.o9.REVIEWING_PRICE_CHANGE)))return e;const t=[...e];return t.forEach((e=>{if(e.asset.marketplace&&(0,r.qv)(e.asset.marketplace)){const n=e.asset,s=!!n.updatedPriceInfo,a=n.marketplace===r.KD.Sudoswap?t.filter((t=>(0,o.q)(e.asset,t.asset))):t.filter((t=>(0,o.J)(e.asset,t.asset))),i=s?c(n,a.length):((e,t)=>e.marketplace===r.KD.Sudoswap?l(e,t)??"":u(e,t))(n,a.findIndex((e=>e.asset.tokenId===n.tokenId)));s&&e.asset.updatedPriceInfo?e.asset.updatedPriceInfo.ETHPrice=e.asset.updatedPriceInfo.basePrice=i:e.asset.priceInfo.ETHPrice=i}})),t}},52689:(e,t,n)=>{n.d(t,{Q:()=>c});var s=n(23974),r=n(9881),a=n(19321),o=n(29663);const i=(e,t)=>({hasPriceDiff:e!==t,hasVisiblePriceDiff:(0,s.formatEther)(e)!==(0,s.formatEther)(t)}),d=(e,t,n,s)=>{return!(!n||!("priceInfo"in n.assetOut))&&(!!e.marketplace&&(0,r.qv)(e.marketplace)&&(o=e,d=t.filter((t=>u(e,t,s))).length,l=n.assetOut.priceInfo.basePrice,!i((0,a.WX)(o,d),l).hasVisiblePriceDiff));var o,d,l},l=(e,t)=>t&&t.find((t=>"Buy"===t.action&&((e,t)=>"id"in t&&t.id?t.id===e.id:"address"in t&&t.address.toLowerCase()===e.address.toLowerCase()&&t.tokenId===e.tokenId)(e,t.assetOut))),u=(e,t,n)=>((e,t)=>!!l(e,t))(t,n)&&(e.marketplace===r.KD.Sudoswap?(0,o.q)(e,t):(0,o.J)(e,t)),c=(e,t)=>{let n=!1;const s=e.map((s=>{const r=l(s,t);if(t&&!r)return{...s,isUnavailable:!0};let a=s.updatedPriceInfo?s.updatedPriceInfo:s.priceInfo;if(r&&"priceInfo"in r.assetOut){const{hasPriceDiff:o,hasVisiblePriceDiff:l}=i(a.basePrice,r.assetOut.priceInfo.basePrice);if(a=r.assetOut.priceInfo,n=o,l&&!d(s,e,r,t))return{...s,updatedPriceInfo:a}}return{...s,priceInfo:a,updatedPriceInfo:void 0,orderSource:r&&"orderSource"in r.assetOut?r.assetOut.orderSource:void 0}}));return{hasPriceAdjustment:n,updatedAssets:s}}},16381:(e,t,n)=>{n.d(t,{$:()=>i,s:()=>o});var s=n(55043);const r=e=>e.updatedPriceInfo?s.gH.from(e.updatedPriceInfo.ETHPrice).sub(s.gH.from(e.priceInfo.ETHPrice)):s.gH.from(0),a=(e,t)=>r(e).gt(r(t))?-1:1,o=e=>e&&e.reduce(((e,t)=>e.add(s.gH.from(t.updatedPriceInfo?t.updatedPriceInfo.ETHPrice:t.priceInfo.ETHPrice))),s.gH.from(0));function i(e){return{unchanged:e.filter((e=>!e.updatedPriceInfo&&!e.isUnavailable)),priceChanged:e.filter((e=>e.updatedPriceInfo)).sort(a),unavailable:e.filter((e=>e.isUnavailable))}}}}]);
//# sourceMappingURL=3286.b0ba454c.chunk.js.map