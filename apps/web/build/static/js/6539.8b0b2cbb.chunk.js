"use strict";(self.webpackChunk_uniswap_interface=self.webpackChunk_uniswap_interface||[]).push([[6539],{22526:(i,t,e)=>{e.d(t,{A:()=>c});var o=e(33962),n=e(77258),r=e.n(n);function l(){return l=Object.assign||function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=e[o])}return i},l.apply(this,arguments)}function a(i,t){if(null==i)return{};var e,o,n=function(i,t){if(null==i)return{};var e,o,n={},r=Object.keys(i);for(o=0;o<r.length;o++)e=r[o],t.indexOf(e)>=0||(n[e]=i[e]);return n}(i,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);for(o=0;o<r.length;o++)e=r[o],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(i,e)&&(n[e]=i[e])}return n}var s=(0,o.forwardRef)((function(i,t){var e=i.color,n=void 0===e?"currentColor":e,r=i.size,s=void 0===r?24:r,c=a(i,["color","size"]);return o.createElement("svg",l({ref:t,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),o.createElement("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),o.createElement("line",{x1:"5",y1:"12",x2:"19",y2:"12"}))}));s.propTypes={color:r().string,size:r().oneOfType([r().string,r().number])},s.displayName="Plus";const c=s},27698:(i,t,e)=>{e.d(t,{V2:()=>m,Zb:()=>A,PL:()=>T});var o=e(97404),n=e(94548),r=e(16584),l=e(40745),a=e(87872);class s{_data=null;_options;constructor(i){this._options=i,this._options.hoveredTick=i.activeTick}draw(i,t){i.useBitmapCoordinateSpace((i=>this._drawImpl(i,t)))}update(i,t){this._data=i,this._options={...this._options,...t}}_drawImpl(i,t){if(null===this._data||0===this._data.bars.length||null===this._data.visibleRange||null===this._options)return;const e=i.context,o=this._data.bars.map((i=>({x:i.x,y:t(i.originalData.liquidity)??0,tick:i.originalData.tick})));(0,l.VV)(o,this._data.barSpacing,i.horizontalPixelRatio,this._data.visibleRange.from,this._data.visibleRange.to);const n=t(0)??0;e.fillStyle=this._options.tokenAColor;for(let r=this._data.visibleRange.from;r<this._data.visibleRange.to;r++){const t=o[r],s=t.column,c=this._options.activeTick===t.tick,d=this._options.hoveredTick===t.tick;if(!s)return;const u=Math.min(Math.max(i.horizontalPixelRatio,s.right-s.left),this._data.barSpacing*i.horizontalPixelRatio),h=.3*u,v=u-2*h,p=(0,l.Q$)(n,t.y,i.verticalPixelRatio);if(d){const i=.3*e.canvas.height,t=e.canvas.height-i;e.fillStyle=this._options.highlightColor,(0,a.rH)(e,s.left+h,i,v,t,8),e.globalAlpha=1}else e.globalAlpha=.4;if(c?e.fillStyle=this._options.tokenBColor:void 0===this._options.activeTick?e.fillStyle=this._options.color??"white":this._options.activeTick>t.tick?e.fillStyle=this._options.tokenBColor:this._options.activeTick<t.tick&&(e.fillStyle=this._options.tokenAColor),(0,a.rH)(e,s.left+h,p.position,v,p.length,8),e.globalAlpha=1,c&&this._options.activeTickProgress){e.globalCompositeOperation="source-atop";const i=p.length*this._options.activeTickProgress,t=p.position+(p.length-i);e.fillStyle=this._options.tokenAColor,e.beginPath(),e.fillRect(s.left,t,u,i),e.globalCompositeOperation="source-over"}}}}var c=e(72332);class d{_renderer;_tokenAColor;_tokenBColor;_highlightColor;constructor(i){this._tokenAColor=i.tokenAColor,this._renderer=new s(i),this._tokenBColor=i.tokenBColor,this._highlightColor=i.highlightColor}priceValueBuilder(i){return[0,i.liquidity]}isWhitespace(i){return!i.liquidity}renderer(){return this._renderer}update(i,t){this._renderer.update(i,t)}defaultOptions(){return{...c.c8,tokenAColor:this._tokenAColor,tokenBColor:this._tokenBColor,highlightColor:this._highlightColor}}}var u=e(96837),h=e(12072),v=e(48565),p=e.n(v),k=e(33962),g=e(91071);function y(i,t,e,o,n,r,l){try{var a=i[r](l),s=a.value}catch(c){return void e(c)}a.done?t(s):Promise.resolve(s).then(o,n)}function f(i){return function(){var t=this,e=arguments;return new Promise((function(o,n){var r=i.apply(t,e);function l(i){y(r,o,n,l,a,"next",i)}function a(i){y(r,o,n,l,a,"throw",i)}l(void 0)}))}}class m extends r.Iz{series;activeTick;constructor(i,t){super(i,t),this.series=this.api.addCustomSeries(new d(t)),this.series.setData(this.data),this.updateOptions(t),this.fitContent()}updateOptions(i){super.updateOptions(i,{localization:{locale:i.locale},rightPriceScale:{visible:!1,borderVisible:!1,scaleMargins:{top:.35,bottom:0},autoScale:!0},timeScale:{visible:!1,fixLeftEdge:!0,fixRightEdge:!0,borderVisible:!1},crosshair:{horzLine:{visible:!1,labelVisible:!1},vertLine:{visible:!1,labelVisible:!1}},grid:{vertLines:{visible:!1},horzLines:{visible:!1}}});const{data:t,activeTick:e}=i;this.activeTick=e,this.data!==t&&(this.data=t,this.series.setData(t),this.fitContent()),this.series.applyOptions({priceFormat:{type:"volume"},priceLineVisible:!1,lastValueVisible:!1}),this.series.applyOptions(i)}onSeriesHover(i){var t;super.onSeriesHover(i);const e={hoveredTick:(null===(t=i)||void 0===t?void 0:t.item.tick)??this.activeTick};this.series.applyOptions(e)}activeTickIndex(){return this.data.findIndex((i=>i.tick===this.activeTick))}fitContent(){const i=this.data.length,t=this.data.findIndex((i=>i.tick===this.activeTick)),e=-1!==t?t:i/2;this.api.timeScale().setVisibleLogicalRange({from:Math.max(e-50,0),to:Math.min(e+50,this.data.length)})}}const b=u.BigNumber.from(2).pow(128).sub(1);function _(i){return o.CurrencyAmount.fromRawAmount(i,b.toString())}function q(){return(q=f((function*(i,t,e,o,r){if(r.currentTick&&r.sqrtPriceX96&&r.liquidity)try{const l=p().greaterThan(o.liquidityNet,p().BigInt(0))?o.liquidityNet:p().multiply(o.liquidityNet,p().BigInt("-1")),a=[{index:o.tick,liquidityGross:l,liquidityNet:p().multiply(o.liquidityNet,p().BigInt("-1"))},{index:o.tick+n.TICK_SPACINGS[e],liquidityGross:l,liquidityNet:o.liquidityNet}],s=new n.Pool(i,t,e,r.sqrtPriceX96,o.liquidityActive,r.currentTick,a),c=n.TickMath.getSqrtRatioAtTick(a[0].index),d=(yield s.getOutputAmount(_(i),c))[0],u=parseFloat(o.sdkPrice.invert().quote(d).toExact()),h=n.TickMath.getSqrtRatioAtTick(a[1].index),v=(yield s.getOutputAmount(_(t),h))[0];return{amount0Locked:u,amount1Locked:parseFloat(o.sdkPrice.quote(v).toExact())}}catch{return{amount0Locked:0,amount1Locked:0}}}))).apply(this,arguments)}function A(i,t,e,o){return P.apply(this,arguments)}function P(){return(P=f((function*(i,t,e,r){try{const l=n.TICK_SPACINGS[e],a=p().greaterThan(r.liquidityNet,p().BigInt(0))?r.liquidityNet:p().multiply(r.liquidityNet,p().BigInt("-1")),s=n.TickMath.getSqrtRatioAtTick(r.tick),c=[{index:r.tick,liquidityGross:a,liquidityNet:p().multiply(r.liquidityNet,p().BigInt("-1"))},{index:r.tick+n.TICK_SPACINGS[e],liquidityGross:a,liquidityNet:r.liquidityNet}],d=new n.Pool(i,t,Number(e),s,r.liquidityActive,r.tick,c),u=n.TickMath.getSqrtRatioAtTick(r.tick-l),h=o.CurrencyAmount.fromRawAmount(i,b.toString()),v=(yield d.getOutputAmount(h,u))[0],k=parseFloat(r.sdkPrice.invert().quote(v).toExact());return{amount0Locked:k,amount1Locked:parseFloat(v.toExact())}}catch{return{amount0Locked:0,amount1Locked:0}}}))).apply(this,arguments)}function T({tokenA:i,tokenB:t,feeTier:e,isReversed:o,chainId:r,version:l,tickSpacing:a,hooks:s,poolId:c}){const{formatNumber:d,formatPrice:u}=(0,g.kc)(),v=(0,h.U)({currencyA:i,currencyB:t,feeAmount:e,version:l,poolId:c,chainId:r,tickSpacing:a??n.TICK_SPACINGS[e],hooks:s}),[p,y]=(0,k.useState)();return(0,k.useEffect)((()=>{function r(){return r=f((function*(){var r;const l=v.data;if(!l)return;let a,s;const c=[];for(let h=0;h<l.length;h++){const r=l[h],d=o?1e3*h:1e3*(l.length-h),p=v.activeTick===r.tick;let k=r.sdkPrice,y=r.sdkPrice.invert();p&&v.activeTick&&v.currentTick&&(s=h,a=(v.currentTick-r.tick)/n.TICK_SPACINGS[e],k=(0,n.tickToPrice)(i,t,r.tick),y=k.invert());const{amount0Locked:f,amount1Locked:m}=yield A(i,t,e,r);c.push({tick:r.tick,liquidity:parseFloat(r.liquidityActive.toString()),price0:u({price:k,type:g.wl.SwapDetailsAmount}),price1:u({price:y,type:g.wl.SwapDetailsAmount}),time:d,amount0Locked:f,amount1Locked:m})}null===(r=c)||void 0===r||r.map(((i,t)=>{t>0&&(c[t-1].amount0Locked=i.amount0Locked,c[t-1].amount1Locked=i.amount1Locked)}));const d=void 0!==s?c[s]:void 0;if(void 0!==s&&d){const o=yield function(i,t,e,o,n){return q.apply(this,arguments)}(i,t,e,l[s],v);c[s]={...d,...o}}o||c.reverse(),y({barData:c.filter((i=>i.liquidity>0)),activeRangeData:d,activeRangePercentage:a})})),r.apply(this,arguments)}!function(){r.apply(this,arguments)}()}),[v,i,t,d,u,o,e]),{tickData:p,activeTick:v.activeTick,loading:v.isLoading||!p}}},12072:(i,t,e)=>{e.d(t,{U:()=>C});var o=e(58793),n=e(97404),r=e(94548),l=e(82085),a=e(48565),s=e.n(a),c=e(43423),d=e.n(c),u=e(81859),h=e(33962),v=e(74445),p=e(85141),k=e(75299),g=e(34748),y=e(7740),f=e(26179),m=e(84551),b=e(2303);const _=8;function q(i,t,e,o,n,l){let a={...e},c=[];for(let v=n+(l?1:-1);l?v<o.length:v>=0;l?v++:v--){var d,u;const e=Number(null===(d=o[v])||void 0===d?void 0:d.tick),n=(0,r.tickToPrice)(i,t,e),p={liquidityActive:a.liquidityActive,tick:e,liquidityNet:s().BigInt((null===(u=o[v])||void 0===u?void 0:u.liquidityNet)??""),price0:n.toFixed(_),sdkPrice:n};var h;if(l)p.liquidityActive=s().add(a.liquidityActive,s().BigInt((null===(h=o[v])||void 0===h?void 0:h.liquidityNet)??0));else!l&&s().notEqual(a.liquidityNet,s().BigInt(0))&&(p.liquidityActive=s().subtract(a.liquidityActive,a.liquidityNet));c.push(p),a=p}return l||(c=c.reverse()),c}const A=8,P=(i,t,e)=>i&&t&&e?Math.floor(i/e)*e:void 0,T=1e3;function I({currencyA:i,currencyB:t,feeAmount:e,chainId:a,version:s,tickSpacing:c,hooks:u,precalculatedPoolId:v}){var k,f,b,_,q;const[A,P]=(0,h.useState)(0),[I,C]=(0,h.useState)([]),S=(0,h.useMemo)((()=>{var d,h;if(v)return v;const p=i&&t&&e&&s===o.ProtocolVersion.V3?r.Pool.getAddress(null===(d=i)||void 0===d?void 0:d.wrapped,null===(h=t)||void 0===h?void 0:h.wrapped,e,void 0,a?n.V3_CORE_FACTORY_ADDRESSES[a]:void 0):void 0,k=s===o.ProtocolVersion.V4&&i&&t&&e&&c&&u?l.Pool.getPoolId(i,t,e,c,u):void 0;return s===o.ProtocolVersion.V3?p:k}),[a,i,t,e,u,v,c,s]),{data:L,error:w,loading:x}=function(i,t,e=0,n){var r;const{defaultChainId:l}=(0,g.useEnabledChains)(),a=(0,y.iX)(n),s=(0,p.useAllV3TicksQuery)({variables:{address:(null===(r=i)||void 0===r?void 0:r.toLowerCase())??"",chain:(0,m.toGraphQLChain)(a??l),skip:e,first:T},skip:!i||t!==o.ProtocolVersion.V3,pollInterval:d()("30s")}),c=(0,p.useAllV4TicksQuery)({variables:{poolId:i??"",chain:(0,m.toGraphQLChain)(a??l),skip:e,first:T},skip:!i||t!==o.ProtocolVersion.V4,pollInterval:d()("30s")});return(0,h.useMemo)((()=>t===o.ProtocolVersion.V3?s:t===o.ProtocolVersion.V4?c:{data:void 0,error:new Error("Invalid version"),loading:!1}),[s,c,t])}(S,s,A,a),N=(null===(f=L)||void 0===f||null===(k=f.v3Pool)||void 0===k?void 0:k.ticks)??(null===(_=L)||void 0===_||null===(b=_.v4Pool)||void 0===b?void 0:b.ticks);return(0,h.useEffect)((()=>{var i,t;(null===(i=N)||void 0===i?void 0:i.length)&&(C((i=>[...i,...N])),(null===(t=N)||void 0===t?void 0:t.length)===T&&P((i=>i+T)))}),[N]),{isLoading:x||(null===(q=N)||void 0===q?void 0:q.length)===T,error:w,ticks:I}}function C({currencyA:i,currencyB:t,feeAmount:e,chainId:n,version:l,tickSpacing:a,hooks:c,poolId:d}){var p,g,y,m;const _=(0,v.H)().chainId??f.UniverseChainId.Mainnet,T=Boolean((0,u.E7)(l)&&i&&t),{data:C,isLoading:S}=(0,k.u)({fee:e,chainId:n??_,protocolVersions:[l],token0:(0,u.AH)(i,l),token1:(0,u.AH)(t,l),hooks:c},T),L=(null===(p=C)||void 0===p?void 0:p.pools)&&C.pools.length>0?C.pools[0]:void 0,w=null===(g=L)||void 0===g?void 0:g.liquidity,x=null===(y=L)||void 0===y?void 0:y.sqrtPriceX96,N=null===(m=L)||void 0===m?void 0:m.tick,V=(0,h.useMemo)((()=>P(N,e,a)),[N,e,a]),{isLoading:B,error:O,ticks:R}=I({currencyA:i,currencyB:t,feeAmount:e,precalculatedPoolId:d,chainId:n??_,version:l??o.ProtocolVersion.V3,tickSpacing:a,hooks:c});return(0,h.useMemo)((()=>{var e,o,n,l,a;if(!i||!t||void 0===V||!L||!R||0===R.length||B)return{isLoading:B||S,error:O,activeTick:V,data:void 0};const c=null===(e=i)||void 0===e?void 0:e.wrapped,d=null===(o=t)||void 0===o?void 0:o.wrapped,u=R.findIndex((i=>{var t;return(null===(t=i)||void 0===t?void 0:t.tick)&&i.tick>V}))-1;if(u<0)return b.logger.debug("usePoolTickData","usePoolActiveLiquidity","TickData pivot not found",{token0:c.address,token1:d.address,chainId:c.chainId}),{isLoading:B,error:O,activeTick:V,data:void 0};let h;try{h=(0,r.tickToPrice)(c,d,V)}catch(g){return b.logger.debug("usePoolTickData","usePoolActiveLiquidity","Error getting price",{error:g,token0:c.address,token1:d.address,chainId:c.chainId}),{isLoading:B,error:O,activeTick:V,data:void 0}}const v={liquidityActive:s().BigInt((null===(n=L)||void 0===n?void 0:n.liquidity)??0),tick:V,liquidityNet:Number(null===(l=R[u])||void 0===l?void 0:l.tick)===V?s().BigInt((null===(a=R[u])||void 0===a?void 0:a.liquidityNet)??0):s().BigInt(0),price0:h.toFixed(A),sdkPrice:h},p=q(c,d,v,R,u,!0),k=q(c,d,v,R,u,!1).concat(v).concat(p);return{isLoading:B,error:O,currentTick:N,activeTick:V,liquidity:s().BigInt(w??0),sqrtPriceX96:s().BigInt(x??0),data:k}}),[i,t,V,L,R,B,O,N,w,x,S])}}}]);
//# sourceMappingURL=6539.8b0b2cbb.chunk.js.map